@startuml

!theme plain
skinparam monochrome true
skinparam backgroundColor transparent
skinparam shadowing false
skinparam defaultFontName Helvetica 
'left to right direction


actor userClient
actor userBotiga
actor userTransportista
actor supervisor
actor companyiaExterna
actor banc

package Comanda {
package solicitudComanda {
usecase "Solicitar comanda" as CU102
usecase "Llistar botigues" as CU103
CU102 -u[dashed]-> CU103 : include
usecase "Seleccionar oferta" as CU201
CU201 .> CU103 : extends
usecase "Llistar productes" as CU202
CU201 -d[dashed]-> CU202 : include
usecase "Seleccionar quantitat" as CU203
CU202 <-d[dashed]- CU203 : extends
usecase "Mostrar preu" as CU209
CU202 -l[dashed]-> CU209 : include
}

package finalitzacioComanda {
usecase "Acceptar oferta" as CU3021
CU203 <-d[dashed]- CU3021 : extends 
usecase "Escollir metode de pagament" as CU3022
CU3021 -l[dashed]-> CU3022 : include
usecase "Configurar metodes de pagament" as CU303
CU303 -u[dashed]-> CU3022 : extends
}

package consultaComanda {
usecase "Consultar estat" as CU205
CU205 .> CU3021 : extends
usecase "Mostrar mapa" as CU207
CU207 -u[dashed]-> CU205 : extends
}

}

package abonaments {
usecase "Solicitar retorn de diners" as CU306
usecase "avaluarAbonament" as CU307 
CU306 -r[dashed]-> CU307 : include
}

package abonamentsBotiga {
usecase "Fer reclamació" as CU309
usecase "Gestionar reclamació" as CU3010
CU309 -d[dashed]-> CU3010 : include
}


companyiaExterna -u- CU3010
userBotiga -d- CU309
userClient -l- CU102
userClient -l- CU205
userClient -l- CU306


CU303 -d--- userBotiga
CU307 -d- supervisor 

package lliuraments {
usecase "Cercar transportistes" as CU402
usecase "Escollir metode de transport" as CU401
userBotiga -d- CU402
CU401 -u[dashed]-> CU402 : extends
}

package sistemaGPS {
usecase "Localitzar Transportista" as CU4031
usecase "Comptar kilometres" as CU4032
userTransportista -- CU4032
CU207 -d[dashed]-> CU4031 : include
CU4032 -r[dashed]-> CU4031 : extends
CU402 -u[dashed]-> CU4031 : include
} 

package cobraments {
usecase "Aplicar comissio a botiga" as CU308
CU3021 -l[dashed]-> CU308 : include
usecase "Aplicar costos de transport" as CU4041
userBotiga -- CU4041
CU4041 .> CU4032 : include
usecase "Pagar transportistes" as CU4042
CU4041 -u[dashed]-> CU4042
banc -d- CU4042
}
@enduml